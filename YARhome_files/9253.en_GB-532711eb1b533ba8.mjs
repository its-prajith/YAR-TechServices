"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9253],{346035:(e,t,o)=>{var l,i;o.r(t),o.d(t,{default:()=>s});let n=(i=[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},l,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});n.hash="6e4bec581cece19361386d6124ddde90";let s=n},77003:(e,t,o)=>{var l;o.r(t),o.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:l,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};i.hash="b7ea441f2c20a68b323088ebe3847835";let n=i},772667:(e,t,o)=>{o.d(t,{Z:()=>s});var l=o(883119),i=o(785893);let n=/^(?!.*#.*#)#[\p{L}\p{N}_]\S*$/gu;function s({stackedCloseupEnabled:e=!1,text:t}){return t.split(new RegExp(/(#\S*)/)).map((t,o)=>{let s=`${o}-${t}`;return t.match(n)?(0,i.jsx)(l.xv,{color:"link",inline:!0,size:"300",children:(0,i.jsx)(l.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},s):(0,i.jsx)(l.xv,{color:e?"subtle":void 0,children:t},s)})}},650384:(e,t,o)=>{o.d(t,{Z:()=>u});var l=o(667294),i=o(883119),n=o(772667),s=o(214877),a=o(923368),r=o(785893);let c=e=>e.replace(/\s+/g," "),d=e=>null!=e&&e>-1,_=(e,t)=>{let o=t.substr(0,e);return(e??0)-(o.length-c(o).length)},m=({color:e,mention:t,tagObjectId:o,tagType:l,textSize:n})=>{let{logContextEvent:a}=(0,s.v)();return(0,r.jsx)(i.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),a({event_type:101,element:11915,aux_data:{tag_id:o,tag_type:l}})},underline:"none",children:(0,r.jsx)(i.xv,{color:e,inline:!0,overflow:"normal",size:n,weight:"bold",children:t})},o)},u=({description:e,mentionLinkColor:t,shouldAdjustOffset:o,shouldMakeHashtagLinksFromText:s,textSize:c,userMentionTags:u})=>{let{stackedCloseupEnabled:h}=(0,a.x4)();if(0===u.length)return(0,r.jsx)(l.Fragment,{children:e});let g=0,p=[],f=[...u].map(t=>o?{...t,offset:_(t.offset??0,e)}:t).sort((e,t)=>(e.offset??0)-(t.offset??0)).filter(e=>d(e.offset)&&d(e.length));return f.forEach(o=>{let l=o.offset??0,i=o.length??0,n=e.substr(g,l-g),s=e.substr(l,i);p.push(n),p.push((0,r.jsx)(m,{color:t,mention:s,tagObjectId:o.objectId,tagType:o.tagType,textSize:c})),g=l+i}),p.push(e.substr(g)),(s?p.flatMap(e=>"string"!=typeof e?e:(0,n.Z)({stackedCloseupEnabled:h,text:e})):p).reduce((e,t)=>(0,r.jsxs)(i.xv,{inline:!0,size:c,children:[e,t]}),null)}},439917:(e,t,o)=>{o.d(t,{N:()=>c,d:()=>r});var l=o(667294),i=o(797781),n=o(342513),s=o(785893);let{Provider:a,useHook:r}=(0,n.Z)("Flag"),c=({children:e})=>{let[t,o]=(0,l.useState)(),[n,r]=(0,l.useState)(i.Zw.REPORT),[c,d]=(0,l.useState)(i.qb.STARTED),[_,m]=(0,l.useState)(),[u,h]=(0,l.useState)(),g=(0,l.useMemo)(()=>({flagReason:u,flow:n,status:c,selectedReason:_,modalTitle:t,setFlagReason:h,setFlow:r,setModalTitle:o,setStatus:d,setSelectedReason:m}),[t,n,c,_,u]);return(0,s.jsx)(a,{value:g,children:e})}},742103:(e,t,o)=>{o.d(t,{Z:()=>L});var l=o(667294),i=o(702664),n=o(883119),s=o(216167);async function a({userId:e,blockSource:t,blockContext:o,logContextEvent:l}){let i=s.Z.create("UserBlockResource",{blocked_user_id:e,block_source:t,block_context:o});await i.callCreate(),l({event_type:54,object_id_str:e})}var r=o(439917),c=o(797781),d=o(717203),_=o(140017),m=o(339001),u=o(702497),h=o(785893);let g=u.K_Y+"?source=block_dialogue";function p(e){return e.map(({full_name:e})=>e)}let f=function({users:e,onClose:t,onSubmit:o}){let l=(0,_.ZP)(),i=(0,h.jsx)("strong",{children:(0,d.Z)(p(e),l)},"userlist");return(0,h.jsxs)("form",{method:"post",children:[(0,h.jsxs)(n.xu,{padding:8,children:[(0,h.jsx)(n.xv,{children:(0,m.nk)(l.bt("If you block {{ users }}, you won’t be able to follow each other or interact with each other’s Pins.", "If you block {{ users }}, you won’t be able to follow each other or interact with each other’s Pins.", "description of blocking users", undefined, true),{users:i})}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(n.xv,{children:(0,h.jsx)(n.rU,{display:"inlineBlock",href:g,underline:"hover",children:l.bt("Learn more", "Learn more", "link to learn more about blocking", undefined, true)})})]}),(0,h.jsx)(n.xu,{padding:2,children:(0,h.jsxs)(n.kC,{alignItems:"stretch",gap:{row:1,column:0},justifyContent:"end",children:[(0,h.jsx)(n.zx,{fullWidth:!0,onClick:t,text:l.bt("Cancel", "Cancel", "UserBlock.Cancel", undefined, true)}),(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:()=>{o()},text:l.bt("Block", "Block", "UserBlock.Submit", undefined, true),type:"submit"})]})})]})};var x=o(587703),y=o(149722);let b=({deleteAndCloseConversation:e,flagReason:t,flagType:o,onClose:i,selectedReason:s,status:g,users:b,blockContext:P})=>{let w=(0,_.ZP)(),v=(0,x.Z)(),[k,A]=(0,l.useState)({}),{setModalTitle:j,setStatus:z}=(0,r.d)(),I=(0,y.Z)(),{id:T}=I.isAuth?I:{},C=b.filter(({id:e})=>k[e]),S=C.length>0,L=()=>{let e;[c.qb.SUBMITTED,c.qb.PROCESSING].includes(g)?e=w.nbt(["Block this person?", "Block these people?"], C.length, "BlockAndUnfollow", true):o===c.Vm.CONVERSATION&&(e=g===c.qb.COMPLETED?(0,m.nk)(w.bt("You’ve blocked {{usernames}}", "You’ve blocked {{usernames}}", "BlockAndUnfollow", undefined, true),{usernames:(0,d.Z)(p(C),w).join("")}).join(""):w.bt("Thanks for your report", "Thanks for your report", "BlockAndUnfollow", undefined, true)),j(e)};(0,l.useEffect)(()=>{L()},[g]),(0,l.useEffect)(()=>{z(S?c.qb.SELECTED:c.qb.STARTED)},[k]);let E=b.filter(({id:e})=>e!==T),R=[c.qb.STARTED,c.qb.COMPLETED].includes(g);return(0,h.jsx)("form",{method:"post",children:[c.qb.SUBMITTED,c.qb.PROCESSING].includes(g)?(0,h.jsx)(f,{onClose:()=>{z(c.qb.SELECTED)},onSubmit:()=>(z(c.qb.PROCESSING),Promise.all(Object.keys(k).filter(e=>k[e]).map(e=>a({userId:e,blockSource:"message_report",blockContext:P,logContextEvent:v}))).finally(()=>{z(c.qb.COMPLETED)})),users:C}):(0,h.jsxs)(n.xu,{padding:8,children:[(0,h.jsx)(n.xu,{children:g!==c.qb.COMPLETED?(()=>{let e;"harassingOther"===s?e=(0,m.nk)(w.bt("We remove content that identifies and attacks private people because we consider it to be bullying. We also don’t allow content that reveals someone’s personally identifiable information. Find out more about our {{ communityGuidelines }}.", "We remove content that identifies and attacks private people because we consider it to be bullying. We also don’t allow content that reveal someone’s personally identifiable information. Learn more about our {{ communityGuidelines }}.", "confirmation message after reporting harassment", undefined, true),{communityGuidelines:(0,h.jsx)(n.rU,{display:"inlineBlock",href:u.MsG,underline:"hover",children:w.bt("Community Guidelines", "Community Guidelines", "link to community guidelines for harassment", undefined, true)},"policyLink")}):"harassingPublicFigure"===s?e=w.bt("Please note that we won’t necessarily take down stuff that attacks public figures.", "Please note that we won’t necessarily take down stuff that attacks public figures.", "message shown after reporting harrassment", undefined, true):"harassingFriend"===s?e=w.bt("Before we can review this Pin, we need to hear from the person who’s being harassed. Please ask your friend to report this Pin to us.", "Before we can review this Pin, we need to hear from the person who’s being harassed. Please have your friend report this Pin to us.", "message shown after reporting harrassment", undefined, true):["spam","policies","hurtfulContent"].includes(t)&&(e=w.bt("We’ll have a look at this Pin and delete it if it goes against our policies.", "We’ll take a look at this Pin and delete it if it goes against our policies.", "confirmation message after reporting a pin", undefined, true));let o=w.nbt(["You can also block this person.", "You can also block these people."], E.length, "description to block people", true);return(0,h.jsxs)(l.Fragment,{children:[e&&(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{children:e})}),(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{children:o})}),(0,h.jsx)(n.xu,{marginBottom:8,children:E.map(({id:e,full_name:t})=>(0,h.jsx)(n.XZ,{checked:!!k[e],helperText:w.bt("You won’t be able to send each other messages or interact with each other’s Pins.", "You won’t be able to send each other messages or interact with each other’s Pins.", "BlockAndUnfollow", undefined, true),id:"blockPinner"+e,label:(0,m.nk)(w.bt("Block {{ pinnerName }}", "Block {{ pinnerName }}", "BlockAndUnfollow", undefined, true),{pinnerName:t}).join(""),onChange:({checked:t})=>{A({...k,[e]:t})}},e))})]})})():S&&(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{children:w.bt("You won’t be able to follow each other or interact with each other’s Pins.", "You won’t be able to follow each other or interact with each other’s pins.", "BlockAndUnfollow", undefined, true)},"blockingConfirmation")})}),(0,h.jsxs)(n.xu,{children:[g!==c.qb.COMPLETED&&(0,h.jsx)(n.xu,{marginBottom:8,children:(0,h.jsx)(n.xv,{size:"100",children:(0,m.nk)(w.bt("Learn more about {{ linkToTopic }}", "Learn more about {{ linkToTopic }}", "BlockAndUnfollow", undefined, true),{linkToTopic:(0,h.jsx)(n.rU,{display:"inlineBlock",href:u.K_Y,underline:"hover",children:w.bt("blocking", "blocking", "BlockAndUnfollow", undefined, true)},"policyLink")})})}),(0,h.jsx)(n.xu,{children:(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:R?()=>{i(),g===c.qb.COMPLETED&&e?.()}:()=>{A(k),z(c.qb.SUBMITTED)},text:R?w.bt("Done", "Done", "Block.Complete", undefined, true):w.bt("Block", "Block", "BlockAndUnfollow", undefined, true)})})]})]})})};function P({flagOptions:e,flow:t,handleClose:o,handleNext:l,selectedReason:i,showPrimaryAction:s,submitButton:a}){let r=(0,_.ZP)();if(t===c.Zw.REPORT){if(c.qb.PROCESSING===status||e.getFlagOption(i)?.isTerminalReason)return a;if(s)return(0,h.jsx)(n.zx,{color:"red",disabled:void 0===i,fullWidth:!0,onClick:l,text:r.bt("Next", "Next", "go to the next view in the report flow", undefined, true)})}else if(t===c.Zw.END)return(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:o,text:r.bt("Got it", "Got it", "confirm reporting flow is done & close modal", undefined, true)});return null}function w({flow:e,flagReason:t}){let o=(0,_.ZP)();if(e===c.Zw.REPORT){if("attacks"===t)return(0,h.jsx)(n.xv,{size:"100",children:(0,m.nk)(o.bt("Learn more about our {{ linkToTopic }}", "Learn more about our {{ linkToTopic }}", "footer link to learn more about community guidelines", undefined, true),{linkToTopic:(0,h.jsx)(n.rU,{href:u.MsG,target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:o.bt("Community Guidelines", "Community Guidelines", "name of footer link to community guidelines", undefined, true)})},"policyLink")})});if("policies"===t)return(0,h.jsxs)("p",{children:[(0,h.jsx)(n.xv,{size:"100",children:(0,m.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(n.rU,{href:u.MsG+"#sub-section-adult-content",target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",children:o.bt("our nudity policies", "our nudity policies", "name of footer link to policy", undefined, true)})},"policyLink")})}),(0,h.jsx)(n.xv,{size:"100",children:(0,m.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(n.rU,{href:u.MsG+"#sub-section-dangerous-goods-and-activities",target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",children:o.bt("our policies on hurtful content", "our policies on hurtful content", "name of footer link to policy", undefined, true)})},"policyLink")})}),(0,h.jsx)(n.xv,{size:"100",children:(0,m.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(n.rU,{href:u.MsG+"#sub-section-violence",target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",children:o.bt("our policies on gore", "our policies on gore", "name of footer link to policy", undefined, true)})},"policyLink")})})]});if("spam"===t||void 0===t)return(0,h.jsx)(n.xv,{size:"100",children:(0,m.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(n.rU,{href:u.MsG,target:"blank",children:(0,h.jsx)(n.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:"spam"===t?o.bt("our spam policies", "our spam policies", "name of footer link to policy", undefined, true):o.bt("our policies", "our policies", "name of footer link to policy", undefined, true)})},"policyLink")})})}return null}function v({arrayOfData:e,handleSelectReason:t,selectedReason:o}){let l=(0,_.ZP)();return(0,h.jsx)(n.xu,{padding:2,children:(0,h.jsx)(n.FX,{id:"flag-option-radio-group",legend:l.bt("Flag legends", "Flag legends", "flag_legend", undefined, true),legendDisplay:"hidden",children:e.map((e,l)=>{let{condition:i}=e;return void 0===i||i?function(e,t,o,l){let{text:i,value:s,category:a}=e;return(0,h.jsx)(n.xu,{paddingY:2,children:(0,h.jsx)(n.FX.RadioButton,{checked:o===s,id:s,label:i,name:"flagReason",onChange:({checked:e})=>t(e,s,a),value:s})},l)}(e,t,o,l):null})})})}class k{constructor(e){this.config=e,this.configMap=function(e){let t={};for(let o in e){let l=e[o];l.forEach(e=>{let{value:l}=e;if(Object.prototype.hasOwnProperty.call(t,l))throw Error("Duplicate key in FlagOptions config: "+l);t[l]={...e,parentOption:o}})}return t}(e)}getFlagOption(e){return e?this.configMap[e]:null}renderFlagLabels(e){let{flagReason:t,onSelectReason:o,selectedReason:l}=e;return(0,h.jsx)(v,{arrayOfData:this.config[t],handleSelectReason:o,selectedReason:l})}}var A=o(930837);function j(e,t,o){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class z extends l.Component{constructor(...e){super(...e),j(this,"flagOptions",new k(this.props.flagOptionsConfig)),j(this,"renderContent",()=>{let{content:e,flow:t,onSelectReason:o,selectedReason:l}=this.props;return e||(t===c.Zw.REPORT?this.flagOptions.renderFlagLabels({flagReason:this.props.flagReason||"__default",onSelectReason:o,selectedReason:l}):t===c.Zw.END?(0,h.jsx)(n.xv,{children:this.props.i18n.bt("We’ll use your feedback to make your Pinterest experience better.", "We’ll use your feedback to make your Pinterest experience better.", "final message in reporting flow", undefined, true)}):void 0)})}componentDidUpdate(e){let{flow:t,onCompletedReport:o,onCompletedBlock:l}=e;if(this.props.flow!==t)switch(t){case c.Zw.REPORT:o&&o();break;case c.Zw.BLOCK:l&&l()}}render(){let{accessibilityModalLabel:e,deleteAndCloseConversation:t,flagType:o,flow:l,status:i,modalTitle:s,onClose:a,selectedReason:r,submitButton:d,flagReason:_,showPrimaryAction:m,users:u,blockContext:g}=this.props;return(0,h.jsx)(A.ZP,{accessibilityModalLabel:e,footer:l!==c.Zw.BLOCK?(0,h.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[(0,h.jsx)(n.xu,{flex:"grow",children:(0,h.jsx)(w,{flagReason:_,flow:l})}),(0,h.jsx)(n.xu,{padding:1,children:l===c.Zw.REPORT?(0,h.jsx)(n.zx,{fullWidth:!0,onClick:void 0===_?this.props.onClose:()=>{this.props.onRevert?.()},text:void 0===_?this.props.i18n.bt("Cancel", "Cancel", "cancel form", undefined, true):this.props.i18n.bt("Back", "Back", "previous step in a form", undefined, true)}):null}),(0,h.jsx)(n.xu,{padding:1,children:(0,h.jsx)(P,{flagOptions:this.flagOptions,flow:l,handleClose:this.props.onClose,handleNext:()=>{this.props.onNext?.()},selectedReason:r,showPrimaryAction:!!m,submitButton:d})})]}):void 0,heading:s,onDismiss:a,size:"md",children:(0,h.jsx)(n.xu,{children:l===c.Zw.BLOCK?(0,h.jsx)(b,{blockContext:g,deleteAndCloseConversation:t,flagReason:_,flagType:o,onClose:a,selectedReason:r,status:i,users:u}):this.renderContent()})})}}function I(e){let t=(0,_.ZP)();return(0,h.jsx)(z,{...e,i18n:t})}var T=o(88682),C=o(930822);let S="policies";function L({aggregatedPinDataId:e,didItDataId:t,onClose:o,pinId:s,username:a,users:d}){let m=(0,_.ZP)(),[g,p]=(0,l.useState)([]),[f,x]=(0,l.useState)(),[y,b]=(0,l.useState)(),P=(0,i.useDispatch)(),w=(e,t,o,l,i)=>P((0,C.Th)(e,t,o,l,i)),{flow:v,modalTitle:k,selectedReason:A,setFlow:j,setModalTitle:z,setSelectedReason:L,setStatus:E,status:R}=(0,r.d)(),D=()=>{if(v===c.Zw.REPORT)switch(y){case"attacks":return m.bt("What's going on?", "What's going on?", "title for report content flow", undefined, true);case S:return m.bt("What's wrong with this try?", "What's wrong with this Try?", "title for report content flow", undefined, true);case"IP":return m.bt("Intellectual property", "Intellectual Property", "title for report content flow for IP complaints", undefined, true);default:return m.bt("What's wrong with this try?", "What's wrong with this Try?", "title for the report content flow", undefined, true)}else if(v===c.Zw.END&&g.includes("notUseful"))return m.bt("Thanks for letting us know.", "Thanks for letting us know!", "title at end of report flow when content is not useful", undefined, true);return""};(0,l.useEffect)(()=>{z(D())},[g,v,y]);let O=(0,h.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:()=>{if(E(c.qb.PROCESSING),"ignoreThisPin"===A)j(c.Zw.BLOCK),E(c.qb.STARTED);else{let o=[...g,A];p(o),w(e,o,t,f,a),g.includes("notUseful")?j(c.Zw.END):j(c.Zw.BLOCK),E(c.qb.STARTED)}},text:m.bt("Report content", "Report content", "button to report content", undefined, true)});return(0,h.jsx)(I,{accessibilityModalLabel:m.bt("Report conversation", "Report conversation", "Pin.DidIt.Report", undefined, true),blockContext:e??"",content:"IP"===y?(0,h.jsx)(n.xu,{justifyContent:"center",mdDisplay:"flex",children:(0,h.jsxs)(n.xu,{mdColumn:9,children:[(0,h.jsx)(n.xu,{marginStart:2,padding:2,children:(0,h.jsx)(n.xv,{align:"center",color:"default",weight:"bold",children:m.bt("If you’ve found content that you believe violates your intellectual property, you can fill in our copyright complaint form.", "If you’ve found content that you believe violates your intellectual property, you can fill out our copyright complaint form.", "explanation of IP complaint process", undefined, true)})}),(0,h.jsx)(n.xu,{padding:2,children:(0,h.jsx)(n.ZP,{color:"red",href:(0,T.Z)(u.GEi,{pin_id:s,user_did_it_id:t}),target:"blank",text:m.bt("File a report", "File a report", "link to DMCA form", undefined, true)})})]})}):null,flagOptionsConfig:{__default:[{text:m.bt("It isn't useful or relevant", "It isn't useful or relevant", "tried-it reporting flow", undefined, true),value:"ignoreThisPin",isTerminalReason:!0,category:"ignoreThisPin"},{text:m.bt("It shouldn't be on Pinterest", "It shouldn't be on Pinterest", "tried-it reporting flow", undefined, true),value:S,isTerminalReason:!1},{text:m.bt("This is spam", "It's spam", "tried-it reporting flow", undefined, true),value:"spam",isTerminalReason:!0,category:"spam"},{text:m.bt("It's my intellectual property", "It's my intellectual property", "tried-it reporting flow", undefined, true),isTerminalReason:!1,value:"IP"}],ignoreThisPin:[],policies:[{text:m.bt("It's sexually explicit", "It's sexually explicit", "tried-it reporting flow", undefined, true),value:"nudity",isTerminalReason:!0,category:"nudity"},{text:m.bt("It's self-harm", "It's self-harm", "an option on tried-it reporting flow", undefined, true),value:"self-harm",isTerminalReason:!0,category:"self-harm"},{text:m.bt("It's hate speech", "It's hate speech", "tried-it reporting flow", undefined, true),value:"hate-speech",isTerminalReason:!0,category:"hate-speech"},{text:m.bt("It's harassment or bullying", "It's harassment or bullying", "tried-it reporting flow", undefined, true),value:"attacks",isTerminalReason:!1,category:"attacks"},{text:m.bt("It's graphic violence", "It's graphic violence", "tried-it reporting flow", undefined, true),value:"gore",isTerminalReason:!0,category:"graphic-violence"}],attacks:[{text:m.bt("It's a photo of me or my child", "It's a photo of me or my child", "tried-it reporting flow", undefined, true),value:"harassingMeOrMyChild",isTerminalReason:!0,category:"attacks"},{text:m.bt("It identifies and attacks me or someone I know", "It identifies and attacks me or someone I know", "tried-it reporting flow", undefined, true),value:"harassingMeOrAFriend",isTerminalReason:!0,category:"attacks"},{text:m.bt("Something else", "Something else", "tried-it reporting flow", undefined, true),value:"harassingOther",isTerminalReason:!0,category:"attacks"}],IP:[],spam:[]},flagReason:y,flagType:c.Vm.DID_IT,flow:v,modalTitle:k,onClose:o(!0),onNext:()=>{b(A),p([...g,A]),L()},onRevert:()=>{let e=g[g.length-1],t=g.slice(0,-1);L(e),b(t[t.length-1]),p(t),x(),E(void 0===e?c.qb.STARTED:c.qb.SELECTED)},onSelectReason:(e,t,o)=>{e&&(L(t),E(c.qb.SELECTED),x(o))},selectedReason:A,showPrimaryAction:"IP"!==y,status:R,submitButton:O,users:d})}},797781:(e,t,o)=>{o.d(t,{Vm:()=>n,Zw:()=>l,qb:()=>i});let l={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},i={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},n={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},258656:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(883119),i=o(205841),n=o(140017),s=o(785893);let a=({isQuestion:e,name:t,size:o,src:a})=>{let r=(0,n.ZP)();return(0,s.jsxs)(l.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,s.jsx)(i.qE,{name:t,size:o,src:a}),e&&(0,s.jsxs)(l.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,s.jsx)(l.xu,{position:"absolute",children:(0,s.jsx)(l.JO,{accessibilityLabel:r.bt("Q&A comment", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"dark",icon:"speech"})}),(0,s.jsx)(l.xu,{position:"absolute",children:(0,s.jsx)(l.JO,{accessibilityLabel:r.bt("Q&A comment", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"light",icon:"question-mark",size:8})})]})]})}},139922:(e,t,o)=>{o.d(t,{Z:()=>er});var l=o(883119),i=o(667294),n=o(702664),s=o(473727),a=o(161881),r=o(439917),c=o(742103),d=o(258656),_=o(140017),m=o(785893);let u=({color:e,isMarkedHelpful:t})=>{let o=(0,_.ZP)();return(0,m.jsx)(l.JO,{accessibilityLabel:o.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var h=o(144138),g=o(903591),p=o(214877),f=o(454514),x=o(340523),y=o(13848),b=o(149722),P=o(785059),w=o(35222),v=o(199677),k=o(415199),A=o(930822),j=o(291867),z=o(937310),I=o(825784);let T=({aggregatedPinDataId:e,anchor:t,closeupAttributionId:o,comment:s,dismiss:a,isOpen:r,isReply:c,onEdit:d,onShowBlockUserModal:u,parentId:T,pinnerId:C,pinId:S,showIndiaLawReporting:L,showNetzDGReporting:E})=>{let R=(0,_.ZP)(),D=(0,n.useDispatch)(),{logContextEvent:O}=(0,p.v)(),{showToast:M}=(0,y.F9)(),{checkExperiment:Z}=(0,x.F)(),{anyEnabled:B}=Z("web_m10n_business_access_orbac_ga"),{toggleAggregatedCommentHighlight:N}=(0,k.nf)(),F=(0,h.Z)(),[U,G]=(0,i.useState)(!1);(0,i.useEffect)(()=>{G(r)},[r,G]);let $=(0,b.Z)(),H=(0,P.Z)(),K=(0,w.Z)(),{reportComment:W}=(0,I.f)(),q=o??"",V=s.user.id,Y=$.isAuth&&q===$.id,J="userdiditdata"===s.type,X=(0,v.q6)($,C??"",B?H:{}),Q=(0,v.D3)($,V,B?H:{}),ee=(0,v.D3)($,q,B?H:{}),et=$.isAuth&&(s.tagged_users||[]).filter(({id:e})=>e===$.id).length>0,eo=async e=>{try{await N({aggregatedCommentId:s.id,pinId:S,isHighlighted:e}),O({event_type:101,component:13712,element:e?12475:12474,view_type:220,aux_data:{creator_id:V}}),M(({hideToast:t})=>(0,m.jsx)(f.ZP,{onHide:t,primaryAction:{accessibilityLabel:R.bt("Undo comment highlight or comment highlight removal", "Undo comment highlight or comment highlight removal", "unifiedComment.unifiedCommentContainer.commentHighlightToast.a11yUndoButton", undefined, true),label:R.bt("Undo", "Undo", "unifiedComment.unifiedCommentContainer.commentHighlightToast.undoButton", undefined, true),size:"lg",onClick:()=>{N({aggregatedCommentId:s.id,pinId:S,isHighlighted:!e})}},text:e?R.bt("Highlight removed", "Highlight removed", "unifiedComment.unifiedCommentContainer.popover.commentHighlightRemovalToast", undefined, true):R.bt("Comment highlighted", "Comment highlighted", "unifiedComment.unifiedCommentContainer.popover.commentHighlightToast", undefined, true)}))}catch(e){e.message&&M(({hideToast:t})=>(0,m.jsx)(f.ZP,{onHide:t,text:e.message,type:"error"}))}},el=e=>()=>void eo(e),ei=e=>()=>{e(),a(!0)};if(!r)return null;let en={highlight:R.bt("Highlight", "Highlight", "Highlight a community post or comment", undefined, true),removeHighlight:R.bt("Remove highlight", "Remove highlight", "Remove highlight for a community post or comment", undefined, true),edit:R.bt("Edit", "Edit", "Edit a community post or comment", undefined, true),delete:R.bt("Delete", "Delete", "Delete a community post or comment", undefined, true),reportContent:R.bt("Report this content", "Report this content", "Report a community post or comment", undefined, true),removeMention:R.bt("Remove @mention", "Remove @mention", "closeup.activityItem.removeMention", undefined, true),reportForIndianLaw:R.bt("Report for Indian law", "Report for Indian law", "commentOverflowPopover.option.reportForIndianLaw", undefined, true),reportForNetzDG:R.bt("Report comment for NetzDG", "Report comment for NetzDG", "commentOverflowMenu.option.reportForNetzDG", undefined, true),blockUser:R.bt("Block user", "Block user", "closeup.activityItem.blockUser", undefined, true)},es=new l.Ry(1);return U&&(0,m.jsx)(l.xu,{onFocus:e=>e.stopPropagation(),children:(0,m.jsx)(l.Lt,{anchor:t,disableMobileUI:!0,id:"comment-overflow-popover",idealDirection:"down",isWithinFixedContainer:!1,onDismiss:()=>a(!1),zIndex:es,children:$.isAuth?(0,m.jsxs)(i.Fragment,{children:[!c&&Y&&!s.highlighted_by_pin_owner&&!J&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-highlight",onSelect:ei(el(!1)),option:{label:en.highlight,value:en.highlight}}),!c&&Y&&s.highlighted_by_pin_owner&&!J&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-highlight",onSelect:ei(el(!0)),option:{label:en.removeHighlight,value:en.removeHighlight}}),Q&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-edit",onSelect:ei(d),option:{label:en.edit,value:en.edit}}),(Q||ee)&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-delete",onSelect:ei(()=>{"aggregatedcomment"===s.type?F({aggregatedCommentId:s.id,aggregatedPinId:e??"",feedType:c?"aggregatedComments":z.Z.UNIFIED_COMMENTS,orbacSubjectId:K,parentId:T,type:c?g.Rv.REPLY_TO_AGGREGATED:g.Rv.TOP,updateParentCommentCount:!0,pinId:S}):D((0,A.lg)({aggregatedPinDataId:e??"",feedType:z.Z.UNIFIED_COMMENTS,id:s.id,isOwnedByMe:!0,pinId:S??"",username:s.user.username,updateParentDidItCount:!0}))}),option:{label:en.delete,value:en.delete}}),!Q&&!X&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-report",onSelect:ei(()=>{W(s.id,T,s.type)}),option:{label:en.reportContent,value:en.reportContent}}),et&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-mention",onSelect:ei(()=>{D((0,j.Q)(s.id)),M(({hideToast:e})=>(0,m.jsx)(f.ZP,{onHide:e,text:R.bt("@mention removed", "@mention removed!", "unifiedComment.unifiedCommentContainer.mentionRemovalToast", undefined, true)}))}),option:{label:en.removeMention,value:en.removeMention}}),!Q&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-block-user",onSelect:ei(()=>{G(!1),u(),O({component:14349,event_type:9406})}),option:{label:en.blockUser,value:en.blockUser}})]}):(0,m.jsxs)(i.Fragment,{children:[E&&(0,m.jsx)(l.Lt.Link,{dataTestId:"dropdown-item-report-for-netzdg",href:"https://policy.pinterest.com/de/netzdg/",option:{label:en.reportForNetzDG,value:en.reportForNetzDG}}),L&&(0,m.jsx)(l.Lt.Link,{href:`https://www.pinterest.com/about/india/?pinId=${S}&commentId=${s.id}`,option:{label:en.reportForIndianLaw,value:en.reportForIndianLaw}})]})})})};var C=o(600636),S=o(133758),L=o(604625);let E={containerStyle:{boxShadow:"0 0px 8px rgba(0, 0, 0, 0.1)"},helpfulStyle:{backgroundImage:`url(${C})`},lovedStyle:{backgroundImage:`url(${S})`}},R=({setHelpful:e,setLoved:t})=>{let o=(0,_.ZP)(),n=(0,i.useRef)(null),s=(0,i.useRef)(null),[a,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),u=e=>()=>{r(e)},h=e=>()=>{d(e)};return(0,m.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:E.containerStyle},"data-test-id":"comment-reaction-tray-background",display:"flex",height:25,justifyContent:"center",padding:1,position:"relative",rounding:"pill",width:43,children:[(0,m.jsxs)(l.iP,{fullHeight:!0,onMouseDown:t,onMouseEnter:h(!0),onMouseLeave:h(!1),children:[(0,m.jsx)(l.xu,{ref:s,bottom:!0,height:14,marginBottom:3,position:"absolute",width:14}),(0,m.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:E.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:18,marginBottom:c?3:1,position:"absolute",width:18})]}),(0,m.jsxs)(l.iP,{fullHeight:!0,onMouseDown:e,onMouseEnter:u(!0),onMouseLeave:u(!1),children:[(0,m.jsx)(l.xu,{ref:n,bottom:!0,height:14,marginBottom:3,position:"absolute",width:14}),(0,m.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:E.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:18,marginBottom:a?3:1,position:"absolute",width:18})]}),(c||a)&&(0,m.jsx)(l.mh,{zIndex:L.lI,children:(0,m.jsx)(l.J2,{anchor:c?s.current:n.current,idealDirection:"up",onDismiss:()=>{},positionRelativeToAnchor:!1,size:"flexible",children:(0,m.jsx)(l.xu,{alignItems:"center",color:"selected",display:"flex",paddingX:1,paddingY:1,children:(0,m.jsx)(l.xv,{color:"inverse",overflow:"noWrap",size:"100",weight:"bold",children:c?o.bt("Love", "Love", "comment.button.loved", undefined, true):o.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true)})})})})]})};var D=o(311716),O=o(559113),M=o(205841);let Z={helpfulStyle:{backgroundImage:`url(${D})`},lovedStyle:{backgroundImage:`url(${O})`}},B=({response:e})=>{let t=14===e.reaction_type,o=1===e.reaction_type,i=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,m.jsxs)(l.kC,{alignItems:"center",children:[(0,m.jsx)(l.Tg,{href:`/${e.user.username}/`,children:(0,m.jsxs)(l.kC,{alignItems:"center",children:[(0,m.jsx)(l.xu,{maxWidth:40,children:(0,m.jsx)(M.qE,{accessibilityLabel:"",name:i,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,m.jsx)(l.xu,{marginStart:2,maxWidth:80,children:(0,m.jsx)(l.xv,{color:"inverse",size:"100",weight:"bold",children:i})})]})}),(0,m.jsxs)(l.xu,{alignContent:"end",display:"flex",padding:2,children:[o&&(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:Z.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),t&&(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:Z.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var N=o(757640);let F=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],U=({commentId:e,isMarkedHelpfulByMe:t,isLovedByMe:o,isTry:n})=>{let s=(0,b.Z)(),a=(0,N.Z)({name:"ApiResource",options:{url:n?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:F}}),r=a.data?.filter(e=>e.user.id!==s.id);if((o||t)&&r){let t={id:e,reaction_type:o?1:14,user:{first_name:s.isAuth?s.firstName:"",full_name:s.isAuth?s.fullName:"",id:s.isAuth?s.id:"",image_medium_url:s.isAuth?s.imageMediumUrl:"",is_private_profile:!!s.isAuth&&!!s.isPrivateProfile,username:s.isAuth?s.username:""}};r=[t,...r]}let c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let{current:e}=c,t=()=>{a.isFetching||(a.isAtEnd?e?.removeEventListener("scroll",t):a.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[a]),(0,m.jsx)(l.xu,{ref:c,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:r?.map(e=>m.jsx(l.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:m.jsx(B,{response:e})},e.id))})},G=({commentId:e,dismissReactionList:t,helpfulCount:o,isMarkedHelpfulByMe:n,isLovedByMe:s,isReactionListOpen:a,isTry:r,lovedCount:c,onReactionCountHover:d,onToggleHelpful:u,onToggleLove:h})=>{let g=(0,_.ZP)(),p=(0,i.useRef)(),[f,x]=(0,i.useState)(!1),y=!1,b=(c||0)+(o||0);n&&s&&(b-=1);let P=e=>()=>{x(e)},w=()=>{y=!0,d()},v=()=>{y=!1,setTimeout(()=>{y||t()},1e3)},k=(0,m.jsx)(l.xu,{"data-test-id":"comment-reaction-container-entry-point",children:f?(0,m.jsx)(l.iP,{onMouseDown:P(!1),onMouseLeave:P(!1),children:(0,m.jsx)(R,{setHelpful:u(!0),setLoved:h(!0)})}):(0,m.jsx)(l.iP,{onMouseEnter:P(!0),children:(0,m.jsx)(l.JO,{accessibilityLabel:g.bt("React", "React", "comment.actionbar.react", undefined, true),color:"subtle",icon:"heart-outline",size:16})})});return(0,m.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[n||s?(0,m.jsx)(l.iP,{onMouseDown:()=>{u(!1)(),h(!1)()},children:(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${s?O:D})`}},"data-test-id":s?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:16,width:16})}):k,b>0&&(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(l.iP,{onMouseEnter:w,onMouseLeave:v,children:(0,m.jsx)(l.xu,{ref:p,"data-test-id":"comment-reaction-container-reaction-count",children:(0,m.jsx)(l.xv,{color:"subtle",inline:!0,size:"200",weight:"bold",children:b})})}),a&&(0,m.jsx)(l.mh,{zIndex:L.lI,children:(0,m.jsx)(l.J2,{anchor:p.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,m.jsx)(l.iP,{onMouseEnter:w,onMouseLeave:v,children:(0,m.jsx)(U,{commentId:e,isLovedByMe:s,isMarkedHelpfulByMe:n,isTry:r})})})})]})]})};var $=o(53264),H=o(339001);function K(e){let{featuredCommentId:t,parentId:o,parentType:s,isDesktop:a,isLoading:r,isReadOnly:c,openOverflowMenu:d,replyingToCommentId:u,toggleHelpful:h,toggleLike:g,toggleReplyComposer:p,isORBACProfileManager:f,isVideo:x,storyPinDataId:y,pinId:b,closeupAttributionId:P,aggregatedPinDataId:w,closeupAttributionUsername:v,pinnerId:A,reactionListCommentId:j,showReactionListForComment:I,viewParameter:T}=e,C=(0,_.ZP)(),S=(0,k.lV)(),L=(0,n.useSelector)(({feeds:e})=>{let t=e[`${z.Z.AGGREGATED_COMMENT_REPLIES}:${o}`]||[],l=e[`${z.Z.AGGREGATED_COMMENTS}:${o}`]||[],i=t.concat(l);return i.reduceRight((e,{id:t})=>{let o=S[t];return o?[...e,o]:e},[])}),[E,R]=(0,i.useState)(1),D=E===L.length;return(0,m.jsxs)(i.Fragment,{children:[L.length>1&&(0,m.jsx)(l.iP,{onTap:()=>{R(D?0:L.length)},children:(0,m.jsxs)(l.xu,{marginBottom:4,children:[(0,m.jsx)(l.xu,{display:"inlineBlock",marginEnd:2,children:(0,m.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,m.jsx)(l.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:D?C.bt("Hide replies", "Hide replies", "comment.button.hideReplies", undefined, true):(0,H.nk)(C.nbt(["View {{ commentCount }} reply", "View {{ commentCount }} replies"], L.length, "comment.button.showReplies", true),{commentCount:L.length})})]})}),(0,m.jsx)(er,{aggregatedPinDataId:w,closeupAttributionId:P,closeupAttributionUsername:v,comments:L.slice(0,E),commentsDisabled:!1,featuredCommentId:t,gapSize:2,isDesktop:a,isLoading:r,isORBACProfileManager:f,isReadOnly:c,isVideo:x,openOverflowMenu:d,parentId:o,parentType:s,pinId:b,pinnerId:A,reactionListCommentId:j,replyingToCommentId:u,showReactionListForComment:I,storyPinDataId:y,toggleHelpful:h,toggleLike:g,toggleReplyComposer:p,userAvatarSize:"sm",viewParameter:T})]})}var W=o(961907),q=o(757017),V=o(96452),Y=o(5859),J=o(227258),X=o(413110),Q=o(189),ee=o(718738),et=o(193247),eo=o(386129);function el(e){let t;let{aggregatedPinDataId:o,closeupAttributionId:h,closeupAttributionUsername:w,comment:j,featuredCommentId:z,isDesktop:I,isReadOnly:C,isVideo:S,openOverflowMenu:L,toggleReplyComposer:E,parentId:R,parentType:D=X.o.pin,pinId:O,storyPinDataId:M,replyingToCommentId:Z,showReactionListForComment:B,toggleHelpful:N,toggleLike:F,userAvatarSize:U,isORBACProfileManager:el,pinnerId:ei,reactionListCommentId:en,viewParameter:es}=e,{user:{id:ea,first_name:er,id:ec,image_medium_url:ed,username:e_},id:em,image_signatures:eu,is_translatable:eh,comment_count:eg,helpful_count:ep,tags:ef=[]}=j,[ex,ey]=(0,i.useState)(!1),eb=ex&&j.translatedText||j.text,eP=!eh||""===j.translatedText,ew=!1,ev=0,ek=!1,eA=!!j.marked_helpful_by_me,ej=[j.user],ez="",eI=new Date;"aggregatedcomment"===j.type?(ew=j.highlighted_by_pin_owner,ev=j.reaction_counts[1],ek=j.reaction_by_me>0,ej.push(...j.tagged_users),ez=`${e_} ${eb??""}`,eI=new Date(j.created_at)):(ev=j.like_count,ek=j.liked_by_me,t=(j.images[0]||{})["150x150"],ez=`${e_} ${j.details}`,eI=new Date(j.done_at));let eT=(0,_.ZP)(),eC=(0,b.Z)(),{logContextEvent:eS}=(0,p.v)(),{country:eL,countryFromIp:eE,isBot:eR}=(0,Y.B)(),{checkExperiment:eD}=(0,x.F)(),{showToast:eO}=(0,y.F9)(),eM=(0,n.useDispatch)(),eZ=(0,i.useRef)(),{anyEnabled:eB}=eD("web_m10n_business_access_orbac_ga"),eN=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(eL),{COUNTRY_CODES:eF}=ee.LAW_CONFIGURATION.india||{},eU=eE&&eF&&eF.includes(eE)&&eD(I?"ce_dweb_india_law_unauth_report":"ce_mweb_india_law_unauth_report").anyEnabled,eG=!C||eU||eN,e$=1===j.comment_tag,eH=(0,P.Z)(),eK=eB?(0,v.lJ)(eC,eH):"",{nativeEngagementsHiddenForUser:eW}=(0,Q.G)(),{aggregatedCommentsHiddenForUser:eq,translateAggregatedComment:eV,updateAggregatedComment:eY}=(0,k.nf)(),eJ=(0,a.Z)(),eX="userdiditdata"===j.type,eQ=(0,q.Z)(),e0=eh&&eD("dweb_comment_translations").anyEnabled,e1=eX&&eD("dweb_photo_commenting").anyEnabled,e3=!C&&!el&&eX,e6=e3&&I,e2=e3&&!I&&eD("mweb_photo_comment_reactions").anyEnabled,e7=[{offset:0,length:e_.length,color:"darkGray"},...ef.map(e=>({...e,offset:(e.offset||0)+e_.length+1,color:"shopping"}))],e4={SHOW_TRANSLATION:eT.bt("Show translation", "Show translation", "comment.translateButton.showTranslation", undefined, true),TRANSLATING:eT.bt("Translating...", "Translating...", "comment.translateButton.translating", undefined, true),SHOW_ORIGINAL:eT.bt("Show original", "Show original", "comment.translateButton.showOriginal", undefined, true)},e9=(0,i.useRef)(e4.SHOW_TRANSLATION),[e8,e5]=(0,i.useState)(!1),[te,tt]=(0,i.useState)(!1),[to,tl]=(0,i.useState)(!1),[ti,tn]=(0,i.useState)(!1),[ts,ta]=(0,i.useState)(!1),[tr,tc]=(0,i.useState)(!1),[td,t_]=(0,i.useState)(g.A9.NONE),tm=e=>()=>{tt(e)};(0,i.useEffect)(()=>{e0&&eS({event_type:10416,view_type:3,view_parameter:es,component:"pin"===D?13696:13697})},[eS,D,e0,es]),(0,i.useEffect)(()=>{eg>0&&!eR&&eM((0,J.U)("aggregatedcomment"===j.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:em,redux_normalize_feed:!0}}))},[j.type,em]);let tu=D.toLowerCase()===X.o.aggregatedComment.toLowerCase()||D.toLowerCase()===X.n.didIt.toLowerCase(),th=Object.values(X.n).includes(D.toLowerCase()),tg=j.user.first_name||"",tp=async({contentMarkdown:e,force:t,tags:o})=>{let l,i;tn(!0);let n=j.id;if(tu&&(l=D.toLowerCase()===X.n.didIt,n=R,i=j.id),n)try{await eJ({force:t,fromUnifiedComment:!0,objectType:eX||l?X.o.didIt:X.o.aggregatedComment,objectId:n,orbacSubjectId:eK,tags:o,text:e,replyToCommentId:i})}catch(e){if([V.ky,V.LJ].includes(e.code)&&I)return t_(e.code===V.ky?g.A9.WARNING:g.A9.BLOCK),tn(!1),!1}return E&&E(void 0),tn(!1),!0},tf=async({contentMarkdown:e,force:t,tags:o})=>{tl(!0);try{e1?await eM((0,A.IU)({id:j.id,details:e,pinId:O??"",image_signatures:eu??[]})):await eY({commentId:j.id,force:t,orbacSubjectId:eK,tags:o,text:e})}catch(e){if([V.ky,V.LJ].includes(e.code)&&I)return t_(e.code===V.ky?g.A9.WARNING:g.A9.BLOCK),tl(!1),!1}return tt(!1),tl(!1),!0},tx=e=>()=>{e5(e),tc(e),e||eS({component:14349,event_type:9408})},ty=()=>{t_(g.A9.NONE)},tb=()=>{ex||j.translatedText||eV(j.id),ex||e9.current!==e4.SHOW_TRANSLATION?ex&&e9.current===e4.SHOW_ORIGINAL&&eS({event_type:10418,view_type:3,view_parameter:es,component:"pin"===D?13696:13697}):eS({event_type:10417,view_type:3,view_parameter:es,component:"pin"===D?13696:13697}),ey(!ex)};(0,i.useEffect)(()=>{ex&&eP&&(ey(!ex),eO(({hideToast:e})=>(0,m.jsx)(f.ZP,{onHide:e,text:eT.bt("Error – couldn't translate", "Error - couldn't translate", "comment.couldNotTranslate.toast", undefined, true),type:"error"})))},[ex,eP]),ex?e9.current=j.translatedText?e4.SHOW_ORIGINAL:e4.TRANSLATING:e9.current=e4.SHOW_TRANSLATION;let tP=t&&(0,m.jsx)(l.xu,{marginBottom:I?4:2,marginTop:1,children:(0,m.jsx)(l.zd,{height:150,rounding:2,wash:!0,width:150,children:(0,m.jsx)(l.Ee,{alt:t.url??"",color:"#efefef",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""},t.url)})}),tw=I?128:110,tv=j.media?.sticker?.image_url&&eD(I?"ce_dweb_comment_sticker_in_feed":"ce_mweb_comment_sticker_in_feed").anyEnabled&&(0,m.jsx)(l.xu,{height:tw,marginBottom:I?1:0,marginTop:1,width:tw,children:(0,m.jsx)(l.Ee,{alt:j.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:j.media?.sticker?.image_url??""})});return(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(l.$j,{accessibilityLabel:"Loading comment",show:to}),!te&&!to&&(0,m.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,m.jsx)(l.xu,{marginEnd:2,children:(0,m.jsx)(s.rU,{to:`/${e_}/`,children:(0,m.jsx)(d.Z,{isQuestion:e$,name:er||e_||"",size:U,src:ed??""})})}),(0,m.jsxs)(l.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,m.jsxs)(l.kC,{justifyContent:"between",children:[(0,m.jsx)(l.kC.Item,{minWidth:0,children:(0,m.jsxs)(l.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[!I&&tP,(0,m.jsx)(W.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:ej,tags:e7,text:ez}),I&&tP,tv,e0&&(0,m.jsx)(l.xu,{marginBottom:2,marginTop:2,children:(0,m.jsx)(l.iP,{onTap:()=>tb(),children:(0,m.jsx)(l.xv,{color:"subtle",size:"300",weight:"bold",children:e9.current})})})]})}),z===em&&(0,m.jsx)(l.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),ew&&(0,m.jsx)(l.xu,{marginBottom:3,marginTop:4,children:(0,m.jsx)(l.xv,{size:"100",children:(0,H.nk)(eT.bt("Highlighted by @{{ closeupAttributionUsername }}", "Highlighted by @{{ closeupAttributionUsername }}", "comment.highlighted.label", undefined, true),{closeupAttributionUsername:w})})}),eG&&(0,m.jsxs)(l.xu,{alignItems:"center",display:"flex",height:I?25:"100%",justifyContent:"between",position:"relative",children:[(0,m.jsxs)(l.kC,{alignItems:"center",gap:{row:5,column:0},children:[!C&&(0,m.jsx)(l.xu,{"data-test-id":"comments-time-passed",children:(0,m.jsx)(l.xv,{color:"subtle",size:"200",children:eQ(eI,!0)})}),!C&&(!el||eB)&&(0,m.jsx)(l.xu,{"data-test-id":"comment-reply-button-container",children:(0,m.jsx)(l.iP,{onTap:()=>{E&&E(j,R,D)},children:(0,m.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:eT.bt("Reply", "Reply", "comment.button.reply", undefined, true)})})}),!C&&!el&&(!eX||e6||e2)&&(I?(0,m.jsx)(G,{commentId:em,dismissReactionList:()=>{B(void 0)},helpfulCount:ep,isLovedByMe:ek,isMarkedHelpfulByMe:eA,isReactionListOpen:en===em,isTry:eX,lovedCount:ev,onReactionCountHover:()=>{B(em),eS({event_type:9906,component:"pin"===D?13696:13697,view_type:3,view_parameter:es})},onToggleHelpful:e=>()=>{eA!==e&&N(em,!e,eX)()},onToggleLove:e=>()=>{ek!==e&&F(em,!e,eX)()}}):(0,m.jsxs)(l.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,m.jsx)(l.hU,{accessibilityLabel:eT.bt("Like", "Like", "comment.button.like", undefined, true),icon:"heart",iconColor:ek?"red":"gray",onClick:F(em,ek,eX),size:"xs"}),ev>0&&(0,m.jsx)(l.xu,{"data-test-id":"love-count-container",children:(0,m.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:ev})})]})),!(eC.id===ec&&e$)&&(!el||eB)&&(0,m.jsx)(l.xu,{ref:eZ,"data-test-id":"comment-more-options",children:(0,m.jsx)(l.hU,{accessibilityLabel:eT.bt("More", "More", "comment.button.more", undefined, true),icon:"ellipsis",iconColor:"gray",onClick:()=>{I?e5(!e8):L&&L(j,{showIndiaLawReporting:!!eU,showNetzDGReporting:!!eN})},size:"xs"})})]}),!C&&!el&&!I&&(!eX||e2)&&(0,m.jsx)(l.xu,{marginStart:6,children:(0,m.jsx)(l.iP,{fullWidth:!1,onTap:N(em,eA,eX),children:(0,m.jsxs)(l.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,m.jsx)(u,{color:"subtle",isMarkedHelpful:eA}),(0,m.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:eT.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true)}),ep>0&&(0,m.jsx)(l.xu,{"data-test-id":"helpful-count-container",children:(0,m.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:ep})})]})})})]})]})]}),I&&(0,m.jsxs)(i.Fragment,{children:[te&&(0,m.jsx)(l.xu,{marginTop:3,children:(0,m.jsx)($.Z,{commentWarningModalState:td,dismissCommentWarningModal:ty,initialTags:j.tags,initialText:"aggregatedcomment"===j.type?j.text:j.details,isReplyEditor:th,objectType:X.o.aggregatedComment,onAddItem:tf,onCancelItem:tm(!1),postedPhoto:t,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:es})}),Z===em&&(0,m.jsx)(l.xu,{marginStart:tu?0:12,marginTop:3,children:(0,m.jsx)($.Z,{commentWarningModalState:td,dismissCommentWarningModal:ty,initialTags:tu?[{offset:0,object_id:ea,length:tg.length,tag_type:1}]:[],initialText:tu?`${tg} `:"",isReplyEditor:th,objectType:X.o.aggregatedComment,onAddItem:tp,onCancelItem:()=>{E&&E()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:es})})]}),(eg>0||ti)&&(0,m.jsx)(l.xu,{marginStart:12,marginTop:4,children:(0,m.jsx)(K,{aggregatedPinDataId:o,closeupAttributionId:h,closeupAttributionUsername:w,featuredCommentId:z,isDesktop:I,isLoading:ti,isORBACProfileManager:el,isReadOnly:C,isVideo:S,openOverflowMenu:L,parentId:em,parentType:j.type,pinId:O,pinnerId:ei,reactionListCommentId:en,replyingToCommentId:Z,showReactionListForComment:B,storyPinDataId:M,toggleHelpful:N,toggleLike:F,toggleReplyComposer:E,viewParameter:es})}),I&&eG&&(0,m.jsx)(T,{aggregatedPinDataId:o,anchor:eZ.current,closeupAttributionId:h,comment:j,dismiss:e=>{e5(!1),e||eS({component:14349,event_type:10128})},isOpen:e8,isReply:tu,onEdit:tm(!0),onShowBlockUserModal:tx(!0),parentId:R,pinId:O,pinnerId:ei,showIndiaLawReporting:!!eU,showNetzDGReporting:eN}),ts&&(0,m.jsx)(r.N,{children:(0,m.jsx)(c.Z,{aggregatedPinDataId:o,didItDataId:em,onClose:e=>()=>{ta(!e)},pinId:O??"",username:e_,users:[j.user]})}),tr&&(0,m.jsx)(et.Z,{firstName:er??"",onBlockUser:()=>{eM((0,eo.Ge)({id:ea,orbacSubjectId:eK,blockSource:"comment",blockContext:em,logContextEvent:eS})),eq(ea),eW(ea),eS({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eC.isAuth?eC.id:null}}),eS({component:14349,event_type:9407}),tc(!1),eO(({hideToast:e})=>(0,m.jsx)(f.ZP,{onHide:e,text:(0,H.nk)(eT.bt("You've blocked {{ username }}", "You've blocked {{ username }}", "comment.blockAuthor.toast", undefined, true),{username:e_}).join("")}))},onClearModal:tx(!1)})]})}var ei=o(666472),en=o(920845),es=o(923368);let ea=({commentCount:e,show:t,width:o})=>{let i=[];for(let t=0;t<e;t+=1)i.push((0,m.jsx)(l.xu,{marginBottom:4,children:(0,m.jsxs)(l.kC,{alignItems:"center",direction:"row",flex:"grow",gap:3,justifyContent:"start",children:[(0,m.jsx)(l.xu,{overflow:"hidden",rounding:"circle",children:(0,m.jsx)(en.Z,{animation:"wave",height:32,id:"catalog-loading-avatar",type:"circle",width:32,children:(0,m.jsx)(M.qE,{name:"",size:"fit"})})}),(0,m.jsx)(en.Z,{borderRadius:6,height:20,id:`comment-${t}`,type:"rect",width:o})]},t)},t));return t&&(0,m.jsx)(l.kC,{direction:"column",gap:2,width:o,children:i})};function er(e){let t;let{aggregatedPinDataId:o,comments:i,commentsDisabled:n,commentCount:s,featuredCommentId:a,gapSize:r=6,inCommentFeedRedesignExp:c,isDesktop:d,isLoaded:u=!1,isLoading:h=!1,isReadOnly:p,openOverflowMenu:f,toggleReplyComposer:x,parentId:y,parentType:b,replyingToCommentId:P,toggleHelpful:w,toggleLike:v,userAvatarSize:k,isORBACProfileManager:A,isVideo:j,storyPinDataId:z,pinId:I,closeupAttributionId:T,closeupAttributionUsername:C,pinnerId:S,showReactionListForComment:L,reactionListCommentId:E,viewParameter:R}=e,D=(0,_.ZP)(),{stackedCloseupEnabled:O}=(0,es.x4)(),M=d&&c?(0,g.mz)(D):D.bt("No comments yet. Add one to start the conversation.", "No comments yet! Add one to start the conversation.", "commentThread.emptyState.message", undefined, true);return(t=z?"story":j?"video":"pin",n)?(0,m.jsx)(l.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",width:"100%",children:(0,m.jsx)(l.xv,{align:d?"start":"center",color:"subtle",children:D.bt("Comments are turned off for this Pin", "Comments are turned off for this Pin", "commentThread.disabledState.message", undefined, true)})}):i.length>0?(0,m.jsxs)(l.kC,{dataTestId:"aggregated-comment-list",direction:"column",gap:{row:0,column:r},maxHeight:"100%",width:"100%",children:[i.map((e,i)=>(0,m.jsx)(ei.F,{componentType:"pin"===b?13696:13697,impressionAuxFields:{commentId:e.id,pinId:I,pinOwnerUserId:T,pinType:t,parentId:y,parentType:b,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:i,viewType:d?3:98,children:({impressionTrackerRef:t})=>(0,m.jsx)(l.xu,{ref:t,"data-test-id":"commentThread-comment",children:(0,m.jsx)(el,{aggregatedPinDataId:o,closeupAttributionId:T,closeupAttributionUsername:C,comment:e,featuredCommentId:a,isDesktop:d,isORBACProfileManager:A,isReadOnly:p,isVideo:j,openOverflowMenu:f,parentId:y,parentType:b,pinId:I,pinnerId:S,reactionListCommentId:E,replyingToCommentId:P,showReactionListForComment:L,storyPinDataId:z,toggleHelpful:w,toggleLike:v,toggleReplyComposer:x,userAvatarSize:k,viewParameter:R})})},e.id)),(0,m.jsx)(l.$j,{accessibilityLabel:D.bt("Comments loading", "Comments loading", " - ", undefined, true),show:h})]}):(0,m.jsxs)(l.xu,{alignSelf:"center",width:"100%",children:[O?(0,m.jsx)(ea,{commentCount:s,show:h,width:g.cn}):(0,m.jsx)(l.$j,{accessibilityLabel:D.bt("Comments loading", "Comments loading", " - ", undefined, true),show:h}),u&&(0,m.jsx)(l.xv,{align:d?"start":"center",color:"subtle",children:M})]})}},53264:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(667294),i=o(14583),n=o(785893);let s=(0,l.lazy)(()=>Promise.all([o.e(63349),o.e(97239)]).then(o.bind(o,589773)));function a(e){return(0,n.jsx)(i.Z,{fallback:null,children:(0,n.jsx)(s,{...e})})}},717203:(e,t,o)=>{o.d(t,{Z:()=>u,w:()=>h});var l=o(339001);let i=e=>e.bt("{{ first }}", "{{ first }}", "Generic message that lists 1 item", undefined, true),n=e=>e.bt("{{ first }} and {{ second }}", "{{ first }} and {{ second }}", "Generic message that lists 2 items", undefined, true),s=e=>e.bt("{{ first }}, {{ second }} and {{ third }}", "{{ first }}, {{ second }} and {{ third }}", "Generic message that lists 3 items", undefined, true),a=e=>e.bt("{{ first }}, {{ second }}, {{ third }} and {{ fourth }}", "{{ first }}, {{ second }}, {{ third }} and {{ fourth }}", "Generic message that lists 4 items", undefined, true),r=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}", "Generic message that lists 5 items", undefined, true),c=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}", "Generic message that lists 6 items", undefined, true),d=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}", "Generic message that lists 7 items", undefined, true),_=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others", "Generic message that lists more than 6 items", undefined, true),m=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others", "Generic message that lists more than 7 items", undefined, true);function u(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(n(t),o);case 3:return(0,l.nk)(s(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(c(t),o);default:return(0,l.nk)(_(t),o)}}function h(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(n(t),o);case 3:return(0,l.nk)(s(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(c(t),o);case 7:return(0,l.nk)(d(t),o);default:return(0,l.nk)(m(t),o)}}},391884:(e,t,o)=>{o.d(t,{Z:()=>l});function l({embedSrc:e,embedType:t,imagesUrls:o,preferredResolution:l,excludeOriginals:i}){if(!e&&!t&&!o)return"";if("gif"===t)return e||"";if(!o)return"";if(l){let e="474x"===l&&o["474x"]||"236x"===l&&o["236x"]||o["736x"];if(e)return e}let n=Object.keys(o).reduce((e,t)=>{try{let l=t.split("x")[0];if(Number.isNaN(Number(l)))return{...e,[t]:o[t]};return{...e,[l]:o[t]}}catch(t){return e}},{}),s=Object.keys(n);i&&"orig"===s[s.length-1]&&s.pop();let a=s.pop();return n[a]||""}},661428:(e,t,o)=>{o.d(t,{Z:()=>s}),o(167912);var l,i=o(207012);let n=void 0!==l?l:l=o(77003),s=e=>{let t=(0,i.Z)(n,e),o=[["60x60",t?.imageSpec_60x60],["136x136",t?.imageSpec_136x136],["170x",t?.imageSpec_170x],["236x",t?.imageSpec_236x],["474x",t?.imageSpec_474x],["564x",t?.imageSpec_564x],["736x",t?.imageSpec_736x],["600x315",t?.imageSpec_600x315],["orig",t?.imageSpec_orig]];return o.reduce((e,[t,o])=>o?{...e,[t]:o.url}:e,{})}},178093:(e,t,o)=>{o.d(t,{kf:()=>p,l5:()=>h,of:()=>m,xC:()=>g,yz:()=>u});var l=o(667294),i=o(342513),n=o(805783),s=o(494125),a=o(194602),r=o(953565),c=o(785893);let{Provider:d,useMaybeHook:_}=(0,i.Z)("PwaContext"),m=({children:e,initialContext:t})=>{let[o,i]=(0,l.useState)(null),a=t||{pwaType:"unknown",twaType:null},_=a.pwaType;(0,s.Z)(()=>{let e=(0,n.FB)(window)||"unknown";i(e),_!==e&&(0,r.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:_,clientPwaType:e,conflict:"unknown"!==_&&"unknown"!==e}})});let m="unknown"===_&&o?o:_,{twaType:u}=a,h=(0,l.useMemo)(()=>({pwaType:m,twaType:u}),[m,u]);return(0,c.jsx)(d,{value:h,children:e})},u=()=>{let e=_();return e?.pwaType??"unknown"},h=()=>{let e=_();return e?.twaType??null},g=()=>{let e=u();return"android-twa"===e},p=()=>{let e=u(),t=(0,a.Z)();return"unknown"===e&&t?null:"windows"===e}},920845:(e,t,o)=>{o.d(t,{Z:()=>u});var l=o(667294),i=o(883119),n=o(406893);let s="#ebebeb",a="rgba(239, 239, 239, 0.2)",r="#EFEFEF",c=1.5,d="normal",_=({className:e,type:t="text",animation:o="pulse",hasChildren:l=!1,hideChildren:i=!0,enableAnimation:n=!0,color:_="wave"===o?a:s,highlightColor:m=r,height:u,width:h,minWidth:g,borderRadius:p,duration:f=c,direction:x=d})=>{let y="rtl"===x?"reverse":d,b="number"==typeof f?`${f}s`:`${c}s`;return`
@keyframes pulseAnimation {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.4;
  }
  100% {
    opacity: 1;
  }
}

@keyframes waveAnimation {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.${e} {
  background-color: ${_};
  display: block;
  line-height: 1;
  ${"text"===t?`
  margin-top: 0;
  margin-bottom: 0;
  height: auto;
  transform-origin: 0 55%;
  `:""}
  ${"circle"===t?`
  border-radius: 50%;
  `:""}
  ${l&&!h?`
  max-width: fit-content;
  `:""}
  ${"number"==typeof g||"string"==typeof g?`
  min-width: ${g}${"number"==typeof g?"px":""};
  `:""}
  ${l&&!u?`
  height: auto;
  `:""}
  ${n&&"pulse"===o?`
  animation-name: pulseAnimation;
  animation-direction: ${y};
  animation-duration: ${b};
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  `:""}
  ${n&&"wave"===o?`
  position: relative;
  overflow: hidden;
  z-index: 1;

  --webkit-mask-image: radial-gradient(white, black);
  mask-image: radial-gradient(white, black);
  `:""}
  ${"circle"!==t&&"number"==typeof p||"string"==typeof p?`
  border-radius: ${p}${"number"==typeof p?"px":""};
  `:""}
  ${"number"==typeof h||"string"==typeof h?`
  width: ${h}${"number"==typeof h?"px":""};
  `:""}
  ${"number"==typeof u||"string"==typeof u?`
  height: ${u}${"number"==typeof u?"px":""};
  `:""}
}
${"text"===t?`
.${e}:empty:before {
  content: "\\00a0";
}
`:""}
${l&&i?`
.${e} > * {
  visibility: hidden;
}
`:""}
${n&&"wave"===o?`
.${e}::after {
  content: ' ';
  animation-name: waveAnimation;
  animation-direction: ${y};
  animation-duration: ${b};
  animation-timing-function: linear;
  animation-iteration-count: infinite;

  background-repeat: no-repeat;
  background-image: linear-gradient(
    90deg,
    ${_},
    ${m},
    ${_}
  );
  ${"circle"!==t&&"rect"!==t?`
  border-radius: 100px;
  `:""}
  position: absolute;
  transform: translateX(-100%);
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
`:""}
`};var m=o(785893);function u({id:e,type:t="text",animation:o="pulse",children:s,height:a,...r}){let c=(0,i.JZ)(),d=!!s,u=`catalog-loading-skeleton-${e}`,h=_({className:u,type:t,animation:o,hasChildren:d,enableAnimation:!c,height:a,...r});return(0,m.jsxs)(l.Fragment,{children:[(0,m.jsx)(n.Z,{unsafeCSS:h}),(0,m.jsx)("span",{className:u,"data-test-id":e,children:d?s:(0,m.jsx)(l.Fragment,{children:"‌"})})]})}},35222:(e,t,o)=>{o.d(t,{Z:()=>s});var l=o(149722),i=o(785059),n=o(199677);let s=()=>{let e=(0,l.Z)(),t=(0,i.Z)(),o=(0,n.lJ)(e,t);return o}},94521:(e,t,o)=>{o.d(t,{H:()=>a,Z:()=>s});var l=o(224796),i=o(731714),n=o(217058);async function s({filename:e,imgSrc:t,imageDownloadSuccessCallback:o,category:l,pinId:i,viewParameter:s,viewType:a,isUnauth:r=!1,platform:c="web",expName:d,expGroup:_},m){return"undefined"==typeof window?Promise.resolve():((0,n.My)("web.download.click",{category:l||"no_category",authType:r?"unauth":"auth",platform:c,viewType:a,expName:d,expGroup:_}),m({event_type:82,object_id_str:i,view_type:a||3,view_parameter:s||139}),t&&document)?fetch(t,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then(e=>e.blob()).then(t=>{let i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.setAttribute("download",e&&e.replace(".","_")),i.style.display="none",document.body?.appendChild(i),i.click(),document.body?.removeChild(i),(0,n.My)("web.download.success",{category:l||"no_category",authType:r?"unauth":"auth",platform:c,viewType:a,expName:d,expGroup:_}),o?.()}).catch(()=>{throw(0,n.My)("web.download.failure",{category:l||"no_category",authType:r?"unauth":"auth",platform:c,viewType:a,expName:d,expGroup:_}),Error("Download image error")}):Promise.resolve()}let a=(e,t)=>{let o=i.Z.getItem(l.rN)||0,{group:n}=e(t),s=!!n&&n.startsWith("enabled");if(!s)return{expName:t,expGroup:n,limitReached:!0,oldCount:o,newCount:o};let a=n.split("_").pop(),r=a?parseInt(a,10):0,c=o>=r,d=c?o:o+1;return o!==d&&i.Z.setItem(l.rN,d),{expName:t,expGroup:n,limitReached:c,oldCount:o,newCount:d}}},861748:(e,t,o)=>{o.d(t,{Z:()=>j,w:()=>w});var l,i=o(667294),n=o(702664);o(167912);var s=o(616550),a=o(442279),r=o(883119),c=o(139922),d=o(333739),_=o(757640),m=o(554786),u=o(494125),h=o(149722),g=o(415199),p=o(413110),f=o(110155),x=o(930822),y=o(937310),b=o(386008),P=o(785893);let w=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:o,isDesktop:l,isReversed:i=!1,noCache:n=!1})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:o,page_size:l?10:25,redux_normalize_feed:!0,is_reversed:i},noCache:n}),v=(0,a.P1)((e,t,o)=>o,({feeds:e},t)=>e[`${y.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,t,o,l)=>l,(e,t,o,l)=>t?.map(({id:t,type:i})=>{let n="aggregatedcomment"===i.toLowerCase()?e[t]:o[t];if(!n)return;let s="string"==typeof n.user?l[n.user]??{}:n.user??{};return{...n,user:s??{}}}).filter(e=>e)||[]),k=void 0!==l?l:l=o(346035),A=({aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,commentsDisabled:l,hasComments:a,isReadOnly:d,pinId:y,isVideo:k,pinnerId:A,scrollContainer:j,setIsComposingNewComment:z=()=>{},storyPinDataId:I,viewParameter:T,toggleComposerForReply:C,openMwebOverflowMenu:S})=>{let{comment_id:L}=(0,s.UO)(),E=(0,n.useDispatch)(),R=(0,m.HG)(),D=(0,h.Z)(),O=(0,i.useRef)(a),M=(0,_.Z)(O.current&&e?w({aggregatedPinDataId:e,featuredCommentIds:L?[L]:[],isDesktop:R}):null),{removeUnauthCommentPinId:Z,unauthCommentPinId:B}=(0,f.C)(),N=(0,g.lV)(),{toggleAggregatedCommentHelpful:F,toggleAggregatedCommentLike:U}=(0,g.nf)(),G=(0,b.kW)(),$=(0,n.useSelector)(t=>v(t,e,N,G)),[H,K]=(0,i.useState)(void 0),W=()=>{z(!0)};return(0,u.Z)(()=>{!R&&D.isAuth&&B&&y&&B===y&&(W(),Z())}),(0,i.useEffect)(()=>{let e=()=>{let t=!!j&&j.scrollTop+j.clientHeight+10>=j.scrollHeight;M&&!M.isFetching&&(M.isAtEnd?j?.removeEventListener("scroll",e):t&&M.fetchMore())};return j?.addEventListener("scroll",e),()=>{j?.removeEventListener("scroll",e)}},[M,j]),(0,P.jsx)(i.Fragment,{children:(0,P.jsx)(r.xu,{display:"flex",marginTop:R?6:0,width:"100%",children:(0,P.jsx)(c.Z,{aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,comments:$,commentsDisabled:l,isDesktop:R,isLoaded:M&&M.isLoaded||!a,isReadOnly:d,isVideo:k,openOverflowMenu:S,parentId:e??"",parentType:p.o.pin,pinId:y,pinnerId:A,reactionListCommentId:H,showReactionListForComment:K,storyPinDataId:I,toggleHelpful:(e,t,o)=>()=>{o?E((0,x.YH)({didItDataId:e,isMarkedHelpfulByMe:t})):F({aggregatedCommentId:e,isMarkedHelpfulByMe:t})},toggleLike:(e,t,o)=>()=>{o?E((0,x.wH)({didItDataId:e,isLikedByMe:t})):U({aggregatedCommentId:e,isLikedByMe:t})},toggleReplyComposer:C,userAvatarSize:"sm",viewParameter:T})})})};function j({pinKey:e,...t}){let{data:o}=(0,d.sr)(k,e,{type:"pin",useLegacyAdapter:e=>({aggregatedPinData:e.aggregated_pin_data&&{commentCount:e.aggregated_pin_data.comment_count,didItData:e.aggregated_pin_data.did_it_data&&{imagesCount:e.aggregated_pin_data.did_it_data.images_count},entityId:e.aggregated_pin_data.id??""},closeupAttribution:e.closeup_attribution&&{entityId:e.closeup_attribution.id??"",username:e.closeup_attribution.username},commentsDisabled:e.comments_disabled,doneByMe:e.done_by_me,entityId:e.id,pinner:e.pinner&&{entityId:e.pinner.id},storyPinData:e.story_pin_data&&{entityId:e.story_pin_data.id??""},videos:e.videos&&{videoList:e.videos.video_list&&{__typename:"VideoList"}}})}),l=(o?.aggregatedPinData?.commentCount||0)+(o?.aggregatedPinData?.didItData?.imagesCount||0);return(0,P.jsx)(A,{aggregatedPinDataId:o?.aggregatedPinData?.entityId,closeupAttributionId:o?.closeupAttribution?.entityId,closeupAttributionUsername:o?.closeupAttribution?.username,commentsDisabled:o?.commentsDisabled,disablePhotoCommentSelection:!!o?.doneByMe,hasComments:l>0&&!o?.commentsDisabled,isVideo:!!o?.videos?.videoList,pinId:o?.entityId,pinnerId:o?.pinner?.entityId,storyPinDataId:o?.storyPinData?.entityId,...t})}},110155:(e,t,o)=>{o.d(t,{C:()=>a,p:()=>r});var l=o(667294),i=o(342513),n=o(785893);let{Provider:s,useHook:a}=(0,i.Z)("Session");function r({children:e}){let[t,o]=(0,l.useState)(void 0),i=(0,l.useCallback)(()=>o(void 0),[]),a=(0,l.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:o,removeUnauthCommentPinId:i}),[t,i]);return(0,n.jsx)(s,{value:a,children:e})}},291867:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>i});var l=o(107366);function i(e,t){return async o=>{let{resource_response:i}=await (0,l.Z)({url:`/v3/storypins/${e}/mentions/`,method:"DELETE"});return o({type:"DELETE_PIN_MENTION",payload:{pinId:e,userId:t}}),i}}function n(e){return async t=>{let{resource_response:o}=await (0,l.Z)({url:`/v3/aggregated_comments/${e}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),{data:i}=o;return t({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:i.id,tagged_users:i.tagged_users}}),o}}},311716:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},600636:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpfulOutline-7f59f782.svg"},559113:e=>{e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"},133758:e=>{e.exports="https://s.pinimg.com/webapp/commentLovedOutline-97205606.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/9253.en_GB-532711eb1b533ba8.mjs.map